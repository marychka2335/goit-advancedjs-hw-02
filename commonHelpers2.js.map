{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport '../css/02-timer.css'\n\nconst refs = {\n    inputDate: document.querySelector('#datetime-picker'),\n    buttonStart: document.querySelector('button[data-start]'),\n    days: document.querySelector('span[data-days]'),\n    hours: document.querySelector('span[data-hours]'),\n    minutes: document.querySelector('span[data-minutes]'),\n    seconds: document.querySelector('span[data-seconds]')\n};\n\nlet deltaTime = 0;\nlet leftTime = 0;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0].getTime() < Date.now()) {\n           iziToast.show({\n            message: 'Please choose a date in the future',\n            color: 'orange',\n          position: 'topCenter',\n        timeout: 10000});\n            refs.buttonStart.disabled = true;\n        } else {\n            refs.buttonStart.disabled = false;\n        }\n    }\n};\n\nflatpickr('#datetime-picker', options);\nrefs.buttonStart.disabled = true;\n\nrefs.buttonStart.addEventListener('click', () => {\n    deltaTime = new Date(refs.inputDate.value).getTime() - Date.now();\n    leftTime = convertMs(deltaTime);\n    changeTimeOnTimer(leftTime);\n\n    const timeInterval = setInterval(() => {\n        deltaTime = new Date(refs.inputDate.value).getTime() - Date.now();\n        leftTime = convertMs(deltaTime);\n        refs.inputDate.disabled = true;\n        if (deltaTime < 1000)\n        {\n            clearInterval(timeInterval);\n            refs.inputDate.disabled = false;\n        }\n        leftTime = convertMs(deltaTime);\n        changeTimeOnTimer(leftTime);\n    }, 1000)\n    \n})\n\nfunction changeTimeOnTimer({days, hours, minutes, seconds}) {\n    refs.days.textContent = addLeadingZero(days);\n    refs.hours.textContent = addLeadingZero(hours);\n    refs.minutes.textContent = addLeadingZero(minutes);\n    refs.seconds.textContent = addLeadingZero(seconds);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, '0')\n}"],"names":["refs","deltaTime","leftTime","options","selectedDates","iziToast","flatpickr","convertMs","changeTimeOnTimer","timeInterval","days","hours","minutes","seconds","addLeadingZero","ms","value"],"mappings":"0IAMA,MAAMA,EAAO,CACT,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,oBAAoB,EACxD,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,CACxD,EAEA,IAAIC,EAAY,EACZC,EAAW,EAEf,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACfA,EAAc,GAAG,QAAO,EAAK,KAAK,OACnCC,EAAS,KAAK,CACb,QAAS,qCACT,MAAO,SACT,SAAU,YACZ,QAAS,GAAK,CAAC,EACXL,EAAK,YAAY,SAAW,IAE5BA,EAAK,YAAY,SAAW,EAEnC,CACL,EAEAM,EAAU,mBAAoBH,CAAO,EACrCH,EAAK,YAAY,SAAW,GAE5BA,EAAK,YAAY,iBAAiB,QAAS,IAAM,CAC7CC,EAAY,IAAI,KAAKD,EAAK,UAAU,KAAK,EAAE,QAAS,EAAG,KAAK,MAC5DE,EAAWK,EAAUN,CAAS,EAC9BO,EAAkBN,CAAQ,EAE1B,MAAMO,EAAe,YAAY,IAAM,CACnCR,EAAY,IAAI,KAAKD,EAAK,UAAU,KAAK,EAAE,QAAS,EAAG,KAAK,MAC5DE,EAAWK,EAAUN,CAAS,EAC9BD,EAAK,UAAU,SAAW,GACtBC,EAAY,MAEZ,cAAcQ,CAAY,EAC1BT,EAAK,UAAU,SAAW,IAE9BE,EAAWK,EAAUN,CAAS,EAC9BO,EAAkBN,CAAQ,CAC7B,EAAE,GAAI,CAEX,CAAC,EAED,SAASM,EAAkB,CAAC,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CACxDb,EAAK,KAAK,YAAcc,EAAeJ,CAAI,EAC3CV,EAAK,MAAM,YAAcc,EAAeH,CAAK,EAC7CX,EAAK,QAAQ,YAAcc,EAAeF,CAAO,EACjDZ,EAAK,QAAQ,YAAcc,EAAeD,CAAO,CACrD,CAEA,SAASN,EAAUQ,EAAI,CAMrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EACjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeE,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC"}